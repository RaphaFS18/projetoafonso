<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Biblioteca</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #16a34a 0%, #16a34a 100%);
            min-height: 100vh;
            color: #333;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #16a34a;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #16a34a;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            background: #16a34a;
            color: white;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #16a34a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        label {
            display: block;
            font-weight: 500;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .required {
            color: #dc3545;
        }

        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #16a34a;
            box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .input-group {
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #16a34a;
            z-index: 1;
            pointer-events: none;
        }

        .input-group input, .input-group select {
            padding-left: 2.5rem;
        }

        .input-group select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1em;
            padding-right: 2.5rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e1e5e9;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #16a34a;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #15803d;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }

        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #c3e6cb;
            margin-bottom: 1.5rem;
            display: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
            color: #6b7280;
        }

        .loading.show {
            display: block;
        }

        .char-counter {
            font-size: 0.8rem;
            color: #6c757d;
            text-align: right;
            margin-top: 0.25rem;
        }

        .form-help {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .stats-card i {
            font-size: 3rem;
            color: #16a34a;
            margin-bottom: 1rem;
        }

        .stats-card h3 {
            font-size: 2rem;
            color: #16a34a;
            margin-bottom: 0.5rem;
        }

        .stats-card p {
            color: #6b7280;
            font-weight: 500;
        }

        .list-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .list-item {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-item h4 {
            color: #16a34a;
            margin-bottom: 0.25rem;
        }

        .list-item p {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .delete-btn:hover {
            background: #c82333;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .form-container {
                padding: 1.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <i class="fas fa-book"></i> Sistema de Biblioteca
            </div>
            <ul class="nav-links">
                <li><a onclick="mostrarPagina('inicio')" class="active"><i class="fas fa-home"></i> Início</a></li>
                <li><a onclick="mostrarPagina('livros')"><i class="fas fa-book"></i> Livros</a></li>
                <li><a onclick="mostrarPagina('autores')"><i class="fas fa-user"></i> Autores</a></li>
                <li><a onclick="mostrarPagina('categorias')"><i class="fas fa-tags"></i> Categorias</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Página Inicial -->
        <div id="inicio" class="page active">
            <div class="header">
                <h1><i class="fas fa-home"></i> Dashboard</h1>
                <p>Bem-vindo ao Sistema de Biblioteca</p>
            </div>

            <div class="loading" id="dashboardLoading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Carregando dados...</p>
            </div>

            <div class="dashboard">
                <div class="stats-card">
                    <i class="fas fa-book"></i>
                    <h3 id="totalLivros">0</h3>
                    <p>Livros Cadastrados</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-user"></i>
                    <h3 id="totalAutores">0</h3>
                    <p>Autores Cadastrados</p>
                </div>
                <div class="stats-card">
                    <i class="fas fa-tags"></i>
                    <h3 id="totalCategorias">0</h3>
                    <p>Categorias Cadastradas</p>
                </div>
            </div>
        </div>

        <!-- Página de Livros -->
        <div id="livros" class="page">
            <div class="header">
                <h1><i class="fas fa-book"></i> Cadastro de Livros</h1>
                <p>Adicione um novo livro ao sistema</p>
            </div>

            <div class="form-container">
                <div class="success-message" id="successMessageLivro">
                    <i class="fas fa-check-circle"></i>
                    Livro cadastrado com sucesso!
                </div>

                <form id="livroForm">
                    <div class="form-section"><div class="section-title">
                            <i class="fas fa-info-circle"></i>
                            Informações Básicas
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="titulo">Título <span class="required">*</span></label>
                                <div class="input-group">
                                    <i class="fas fa-book input-icon"></i>
                                    <input type="text" id="titulo" name="titulo" required>
                                </div>
                                <div class="error-message" id="tituloError">Este campo é obrigatório</div>
                            </div>

                            <div class="form-group">
                                <label for="isbn">ISBN</label>
                                <div class="input-group">
                                    <i class="fas fa-barcode input-icon"></i>
                                    <input type="text" id="isbn" name="isbn">
                                </div>
                                <div class="form-help">Código internacional do livro</div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="autorLivro">Autor <span class="required">*</span></label>
                                <div class="input-group">
                                    <i class="fas fa-user input-icon"></i>
                                    <select id="autorLivro" name="autor" required>
                                        <option value="">Selecione um autor</option>
                                    </select>
                                </div>
                                <div class="error-message" id="autorLivroError">Selecione um autor</div>
                            </div>

                            <div class="form-group">
                                <label for="categoriaLivro">Categoria <span class="required">*</span></label>
                                <div class="input-group">
                                    <i class="fas fa-tags input-icon"></i>
                                    <select id="categoriaLivro" name="categoria" required>
                                        <option value="">Selecione uma categoria</option>
                                    </select>
                                </div>
                                <div class="error-message" id="categoriaLivroError">Selecione uma categoria</div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="anoPublicacao">Ano de Publicação</label>
                                <div class="input-group">
                                    <i class="fas fa-calendar input-icon"></i>
                                    <input type="number" id="anoPublicacao" name="anoPublicacao" min="1000" max="2025">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="editora">Editora</label>
                                <div class="input-group">
                                    <i class="fas fa-building input-icon"></i>
                                    <input type="text" id="editora" name="editora">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="sinopse">Sinopse</label>
                            <textarea id="sinopse" name="sinopse" maxlength="500" placeholder="Breve descrição do livro..."></textarea>
                            <div class="char-counter">
                                <span id="sinopseCount">0</span>/500 caracteres
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="limparFormulario('livroForm')">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Livro
                        </button>
                    </div>
                </form>
            </div>

            <div class="list-container">
                <h3><i class="fas fa-list"></i> Livros Cadastrados</h3>
                <div id="listaLivros">
                    <p class="text-center text-muted">Nenhum livro cadastrado ainda.</p>
                </div>
            </div>
        </div>

        <!-- Página de Autores -->
        <div id="autores" class="page">
            <div class="header">
                <h1><i class="fas fa-user"></i> Cadastro de Autores</h1>
                <p>Adicione um novo autor ao sistema</p>
            </div>

            <div class="form-container">
                <div class="success-message" id="successMessageAutor">
                    <i class="fas fa-check-circle"></i>
                    Autor cadastrado com sucesso!
                </div>

                <form id="autorForm">
                    <div class="form-section">
                        <div class="section-title">
                            <i class="fas fa-user-circle"></i>
                            Dados do Autor
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="nomeAutor">Nome Completo <span class="required">*</span></label>
                                <div class="input-group">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="nomeAutor" name="nome" required>
                                </div>
                                <div class="error-message" id="nomeAutorError">Este campo é obrigatório</div>
                            </div>

                            <div class="form-group">
                                <label for="nacionalidade">Nacionalidade</label>
                                <div class="input-group">
                                    <i class="fas fa-globe input-icon"></i>
                                    <input type="text" id="nacionalidade" name="nacionalidade">
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="dataNascimento">Data de Nascimento</label>
                                <div class="input-group">
                                    <i class="fas fa-birthday-cake input-icon"></i>
                                    <input type="date" id="dataNascimento" name="dataNascimento">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="dataFalecimento">Data de Falecimento</label>
                                <div class="input-group">
                                    <i class="fas fa-cross input-icon"></i>
                                    <input type="date" id="dataFalecimento" name="dataFalecimento">
                                </div>
                                <div class="form-help">Deixe em branco se o autor ainda estiver vivo</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="biografia">Biografia</label>
                            <textarea id="biografia" name="biografia" maxlength="1000" placeholder="Informações sobre o autor..."></textarea>
                            <div class="char-counter">
                                <span id="biografiaCount">0</span>/1000 caracteres
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="limparFormulario('autorForm')">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Autor
                        </button>
                    </div>
                </form>
            </div>

            <div class="list-container">
                <h3><i class="fas fa-list"></i> Autores Cadastrados</h3>
                <div id="listaAutores">
                    <p class="text-center text-muted">Nenhum autor cadastrado ainda.</p>
                </div>
            </div>
        </div>

        <!-- Página de Categorias -->
        <div id="categorias" class="page">
            <div class="header">
                <h1><i class="fas fa-tags"></i> Cadastro de Categorias</h1>
                <p>Adicione uma nova categoria ao sistema</p>
            </div>

            <div class="form-container">
                <div class="success-message" id="successMessageCategoria">
                    <i class="fas fa-check-circle"></i>
                    Categoria cadastrada com sucesso!
                </div>

                <form id="categoriaForm">
                    <div class="form-section">
                        <div class="section-title">
                            <i class="fas fa-tag"></i>
                            Dados da Categoria
                        </div>

                        <div class="form-group">
                            <label for="nomeCategoria">Nome da Categoria <span class="required">*</span></label>
                            <div class="input-group">
                                <i class="fas fa-tag input-icon"></i>
                                <input type="text" id="nomeCategoria" name="nome" required>
                            </div>
                            <div class="error-message" id="nomeCategoriaError">Este campo é obrigatório</div>
                        </div>

                        <div class="form-group">
                            <label for="descricaoCategoria">Descrição</label>
                            <textarea id="descricaoCategoria" name="descricao" maxlength="300" placeholder="Descrição da categoria..."></textarea>
                            <div class="char-counter">
                                <span id="descricaoCategoriaCount">0</span>/300 caracteres
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="limparFormulario('categoriaForm')">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Categoria
                        </button>
                    </div>
                </form>
            </div>

            <div class="list-container">
                <h3><i class="fas fa-list"></i> Categorias Cadastradas</h3>
                <div id="listaCategorias">
                    <p class="text-center text-muted">Nenhuma categoria cadastrada ainda.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados simulados para armazenamento
        let livros = [];
        let autores = [];
        let categorias = [];

        // Função para mostrar páginas
        function mostrarPagina(pagina) {
            // Esconder todas as páginas
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
            
            // Mostrar página selecionada
            document.getElementById(pagina).classList.add('active');
            event.target.classList.add('active');

            // Atualizar dados se for a página inicial
            if (pagina === 'inicio') {
                atualizarDashboard();
            }
        }

        // Função para limpar formulários
        function limparFormulario(formId) {
            document.getElementById(formId).reset();
            document.querySelectorAll('.error-message').forEach(msg => msg.style.display = 'none');
        }

        // Contadores de caracteres
        function setupCharCounters() {
            const textareas = [
                { id: 'sinopse', countId: 'sinopseCount' },
                { id: 'biografia', countId: 'biografiaCount' },
                { id: 'descricaoCategoria', countId: 'descricaoCategoriaCount' }
            ];

            textareas.forEach(({ id, countId }) => {
                const textarea = document.getElementById(id);
                const counter = document.getElementById(countId);
                
                if (textarea && counter) {
                    textarea.addEventListener('input', () => {
                        counter.textContent = textarea.value.length;
                    });
                }
            });
        }

        // Validação de formulários
        function validarCampo(campo, erro, mensagem) {
            const valor = campo.value.trim();
            const errorDiv = document.getElementById(erro);
            
            if (!valor) {
                errorDiv.textContent = mensagem;
                errorDiv.style.display = 'block';
                campo.style.borderColor = '#dc3545';
                return false;
            } else {
                errorDiv.style.display = 'none';
                campo.style.borderColor = '#16a34a';
                return true;
            }
        }

        // Formulário de Livros
        document.getElementById('livroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const titulo = document.getElementById('titulo');
            const autor = document.getElementById('autorLivro');
            const categoria = document.getElementById('categoriaLivro');
            
            let isValid = true;
            
            isValid &= validarCampo(titulo, 'tituloError', 'Título é obrigatório');
            isValid &= validarCampo(autor, 'autorLivroError', 'Selecione um autor');
            isValid &= validarCampo(categoria, 'categoriaLivroError', 'Selecione uma categoria');
            
            if (isValid) {
                const livro = {
                    id: Date.now(),
                    titulo: titulo.value,
                    isbn: document.getElementById('isbn').value,
                    autor: autor.value,
                    categoria: categoria.value,
                    anoPublicacao: document.getElementById('anoPublicacao').value,
                    editora: document.getElementById('editora').value,
                    sinopse: document.getElementById('sinopse').value
                };
                
                livros.push(livro);
                mostrarMensagemSucesso('successMessageLivro');
                limparFormulario('livroForm');
                atualizarListaLivros();
                atualizarDashboard();
            }
        });

        // Formulário de Autores
        document.getElementById('autorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nome = document.getElementById('nomeAutor');
            let isValid = validarCampo(nome, 'nomeAutorError', 'Nome é obrigatório');
            
            if (isValid) {
                const autor = {
                    id: Date.now(),
                    nome: nome.value,
                    nacionalidade: document.getElementById('nacionalidade').value,
                    dataNascimento: document.getElementById('dataNascimento').value,
                    dataFalecimento: document.getElementById('dataFalecimento').value,
                    biografia: document.getElementById('biografia').value
                };
                
                autores.push(autor);
                mostrarMensagemSucesso('successMessageAutor');
                limparFormulario('autorForm');
                atualizarListaAutores();
                atualizarSelectAutores();
                atualizarDashboard();
            }
        });

        // Formulário de Categorias
        document.getElementById('categoriaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nome = document.getElementById('nomeCategoria');
            let isValid = validarCampo(nome, 'nomeCategoriaError', 'Nome da categoria é obrigatório');
            
            if (isValid) {
                const categoria = {
                    id: Date.now(),
                    nome: nome.value,
                    descricao: document.getElementById('descricaoCategoria').value
                };
                
                categorias.push(categoria);
                mostrarMensagemSucesso('successMessageCategoria');
                limparFormulario('categoriaForm');
                atualizarListaCategorias();
                atualizarSelectCategorias();
                atualizarDashboard();
            }
        });

        // Função para mostrar mensagem de sucesso
        function mostrarMensagemSucesso(id) {
            const mensagem = document.getElementById(id);
            mensagem.style.display = 'block';
            setTimeout(() => {
                mensagem.style.display = 'none';
            }, 3000);
        }

        // Atualizar listas
        function atualizarListaLivros() {
            const lista = document.getElementById('listaLivros');
            
            if (livros.length === 0) {
                lista.innerHTML = '<p class="text-center text-muted">Nenhum livro cadastrado ainda.</p>';
                return;
            }
            
            lista.innerHTML = livros.map(livro => `
                <div class="list-item">
                    <div>
                        <h4>${livro.titulo}</h4>
                        <p>Autor: ${getAutorNome(livro.autor)} | Categoria: ${getCategoryNome(livro.categoria)}</p>
                        ${livro.anoPublicacao ? `<p>Ano: ${livro.anoPublicacao}</p>` : ''}
                    </div>
                    <button class="delete-btn" onclick="excluirLivro(${livro.id})">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            `).join('');
        }

        function atualizarListaAutores() {
            const lista = document.getElementById('listaAutores');
            
            if (autores.length === 0) {
                lista.innerHTML = '<p class="text-center text-muted">Nenhum autor cadastrado ainda.</p>';
                return;
            }
            
            lista.innerHTML = autores.map(autor => `
                <div class="list-item">
                    <div>
                        <h4>${autor.nome}</h4>
                        ${autor.nacionalidade ? `<p>Nacionalidade: ${autor.nacionalidade}</p>` : ''}
                        ${autor.dataNascimento ? `<p>Nascimento: ${new Date(autor.dataNascimento).toLocaleDateString('pt-BR')}</p>` : ''}
                    </div>
                    <button class="delete-btn" onclick="excluirAutor(${autor.id})">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            `).join('');
        }

        function atualizarListaCategorias() {
            const lista = document.getElementById('listaCategorias');
            
            if (categorias.length === 0) {
                lista.innerHTML = '<p class="text-center text-muted">Nenhuma categoria cadastrada ainda.</p>';
                return;
            }
            
            lista.innerHTML = categorias.map(categoria => `
                <div class="list-item">
                    <div>
                        <h4>${categoria.nome}</h4>
                        ${categoria.descricao ? `<p>${categoria.descricao}</p>` : ''}
                    </div>
                    <button class="delete-btn" onclick="excluirCategoria(${categoria.id})">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            `).join('');
        }

        // Atualizar selects
        function atualizarSelectAutores() {
            const select = document.getElementById('autorLivro');
            select.innerHTML = '<option value="">Selecione um autor</option>' +
                autores.map(autor => `<option value="${autor.id}">${autor.nome}</option>`).join('');
        }

        function atualizarSelectCategorias() {
            const select = document.getElementById('categoriaLivro');
            select.innerHTML = '<option value="">Selecione uma categoria</option>' +
                categorias.map(categoria => `<option value="${categoria.id}">${categoria.nome}</option>`).join('');
        }

        // Funções auxiliares
        function getAutorNome(autorId) {
            const autor = autores.find(a => a.id == autorId);
            return autor ? autor.nome : 'Desconhecido';
        }

        function getCategoryNome(categoriaId) {
            const categoria = categorias.find(c => c.id == categoriaId);
            return categoria ? categoria.nome : 'Desconhecida';
        }

        // Funções de exclusão
        function excluirLivro(id) {
            if (confirm('Tem certeza que deseja excluir este livro?')) {
                livros = livros.filter(livro => livro.id !== id);
                atualizarListaLivros();
                atualizarDashboard();
            }
        }

        function excluirAutor(id) {
            const temLivros = livros.some(livro => livro.autor == id);
            if (temLivros) {
                alert('Não é possível excluir este autor pois existem livros cadastrados para ele.');
                return;
            }
            
            if (confirm('Tem certeza que deseja excluir este autor?')) {
                autores = autores.filter(autor => autor.id !== id);
                atualizarListaAutores();
                atualizarSelectAutores();
                atualizarDashboard();
            }
        }

        function excluirCategoria(id) {
            const temLivros = livros.some(livro => livro.categoria == id);
            if (temLivros) {
                alert('Não é possível excluir esta categoria pois existem livros cadastrados nela.');
                return;
            }
            
            if (confirm('Tem certeza que deseja excluir esta categoria?')) {
                categorias = categorias.filter(categoria => categoria.id !== id);
                atualizarListaCategorias();
                atualizarSelectCategorias();
                atualizarDashboard();
            }
        }

        // Atualizar dashboard
        function atualizarDashboard() {
            document.getElementById('totalLivros').textContent = livros.length;
            document.getElementById('totalAutores').textContent = autores.length;
            document.getElementById('totalCategorias').textContent = categorias.length;
        }

        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', function() {
            setupCharCounters();
            atualizarDashboard();
            
            // Dados iniciais de exemplo
            categorias.push(
                { id: 1, nome: 'Ficção', descricao: 'Livros de ficção e fantasia' },
                { id: 2, nome: 'Romance', descricao: 'Livros de romance' },
                { id: 3, nome: 'Técnico', descricao: 'Livros técnicos e educacionais' }
            );
            
            autores.push(
                { id: 1, nome: 'Machado de Assis', nacionalidade: 'Brasileiro', dataNascimento: '1839-06-21' },
                { id: 2, nome: 'Clarice Lispector', nacionalidade: 'Brasileira', dataNascimento: '1920-12-10' }
            );
            
            atualizarSelectAutores();
            atualizarSelectCategorias();
            atualizarListaAutores();
            atualizarListaCategorias();
            atualizarDashboard();
        });
    </script>
</body>
</html>